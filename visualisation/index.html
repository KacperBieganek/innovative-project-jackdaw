<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Brazilian flights visualisation</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>


    <style>
        html, body {
            height: 100%;
            margin: 0;
        }
        #map {
            width: 800px;
            height: 500px;
        }
    </style>
</head>
<body>

<div id='map'></div>

<script src="js/geojson/flights-geojson.js" type="text/javascript"></script>

<script>
    var map = L.map('map').setView([-23.533773, -46.625290], 2);

    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
        '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
        'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
        id: 'mapbox.streets'
    }).addTo(map);



    function onEachFeature(feature, layer){
        var popupContent = "<p> " +
            "Airline: " + feature.properties.companyAerial + "</p>" +
            "<p> " + "Origin airport:  " + feature.properties.airportOrigin + "</p>";

        layer.bindPopup(popupContent);
    }

    function pointToLayer(feature, latlng){
        return L.circleMarker(latlng, {
            radius: 8,
            fillColor: feature.properties.color,
            color: feature.properties.color,
            weight: 1,
            opacity: 1,
            fillOpacity: 0.8
        });

    }

    function style(feature) {
        return feature.properties && feature.properties.style;
    }

    L.geoJSON([estimatedDeparture,realDeparture, estimatedArrival],{

        style: style,

        onEachFeature: onEachFeature,

        pointToLayer: pointToLayer,

    }).addTo(map);

    L.geoJSON(realArrival, {

        style: function style(feature) {
        return {color: feature.properties.color}
    ;}

    }).addTo(map);

</script>
</body>
</html>

